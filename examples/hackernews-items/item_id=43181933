{"by": "anqurvanillapy", "id": 43181933, "parent": 43176363, "text": "I love this idea so much.<p>I got stuck at how to tackle &quot;new language doesn&#x27;t compile with a standard C compiler&quot; for many times, but my solution is much worse than yours: Like LuaJIT, they left one unreadable &quot;minilua&quot; C file [1] to bootstrap some stuff, we could have a source-code version of the &quot;new C&quot; compiler, compile things <i>twice</i>. That sounds bad.<p>For languages with a very advanced type system that compiles to C, I could only think of Koka [2], which translates the &quot;algebraic effect and handlers&quot; code into pure C, achieving pure C generators, coroutines and async&#x2F;await without the support of setjmp&#x2F;setcontext. But the generated C code is unreadable, I would definitely think about how to handle the readability and debugging issue with sidecar files.<p>[1]: <a href=\"https:&#x2F;&#x2F;github.com&#x2F;LuaJIT&#x2F;LuaJIT&#x2F;blob&#x2F;v2.1&#x2F;src&#x2F;host&#x2F;minilua.c\">https:&#x2F;&#x2F;github.com&#x2F;LuaJIT&#x2F;LuaJIT&#x2F;blob&#x2F;v2.1&#x2F;src&#x2F;host&#x2F;minilua....</a><p>[2]: <a href=\"https:&#x2F;&#x2F;koka-lang.github.io&#x2F;koka&#x2F;doc&#x2F;book.html\" rel=\"nofollow\">https:&#x2F;&#x2F;koka-lang.github.io&#x2F;koka&#x2F;doc&#x2F;book.html</a>", "time": 1740559210, "type": "comment"}